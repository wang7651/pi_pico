# 🚀 快速啟動指南

## 已為您準備好測試數據！

✅ 已生成 50 筆測試數據：
- **sensor_data.csv** - CSV 格式（Flask 使用）
- **sensor_data.xlsx** - Excel 格式（可用 Excel/LibreOffice 開啟查看）

## 立即啟動應用程式

### 方法 1：在終端機中運行（推薦）

```bash
cd /home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/lesson6
uv run python app_flask.py
```

啟動後，在瀏覽器中打開：
- **http://localhost:8080**
- **http://172.20.10.3:8080** （從其他裝置）

### 方法 2：背景運行

```bash
cd /home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/lesson6
nohup uv run python app_flask.py > app.log 2>&1 &
```

查看運行狀態：
```bash
tail -f app.log
```

停止應用程式：
```bash
pkill -f "python app_flask.py"
```

## 📊 測試數據說明

生成的 50 筆測試數據包含：
- **時間範圍**：約 4 小時的歷史數據
- **溫度範圍**：22.5°C ~ 32.0°C
- **濕度範圍**：55% ~ 70%
- **電燈狀態**：模擬白天多關、晚上多開

## 🎯 應該看到什麼？

啟動應用程式後，網頁會顯示：

### 1. 頂部狀態列
- 🟢 MQTT 連線狀態（綠色 = 已連線）
- ⏰ 最後更新時間
- 📊 總記錄數：50

### 2. 三個數據卡片
- 💡 **電燈狀態**：大型圓形指示器（黃色或灰色）
- 🌡️ **客廳溫度**：顯示最新溫度值
- 💧 **客廳濕度**：顯示最新濕度值

### 3. 歷史趨勢圖表
- 📈 雙 Y 軸折線圖
- 紅線：溫度變化
- 藍線：濕度變化
- 可看到完整的 50 筆數據趨勢

## 🔄 重新生成測試數據

如果想要不同的測試數據：

```bash
cd /home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/lesson6
uv run python generate_test_data.py
```

修改數據量（編輯 `generate_test_data.py`）：
```python
# 第 107 行附近
data = generate_test_data(count=100)  # 改為 100 筆
```

## 📡 接收即時 MQTT 數據

在**另一個終端機**中運行測試發布腳本：

```bash
cd /home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/lesson6
uv run python test_mqtt_publish.py
```

這會：
1. 發送 10 筆新的測試數據到 MQTT
2. Flask 應用程式會即時接收並顯示
3. 網頁會自動更新（無需刷新）
4. 新數據會自動追加到 CSV 檔案

## 📁 檔案列表

| 檔案 | 說明 | 用途 |
|------|------|------|
| `app_flask.py` | Flask 應用程式 | **主程式**（執行此檔案） |
| `sensor_data.csv` | CSV 數據檔案 | 測試數據（已生成） |
| `sensor_data.xlsx` | Excel 數據檔案 | 測試數據（可查看） |
| `generate_test_data.py` | 數據生成工具 | 生成測試數據 |
| `test_mqtt_publish.py` | MQTT 測試工具 | 發送 MQTT 訊息 |
| `templates/index.html` | 網頁模板 | 前端介面 |

## ❓ 常見問題

### Q1: 畫面沒有顯示數據？
**A**: 確認終端機有顯示「✅ 已載入 50 筆歷史數據」

### Q2: MQTT 狀態顯示未連線？
**A**: 這是正常的，因為：
- 測試數據來自 CSV 檔案，不需要 MQTT
- 如需 MQTT 功能，確認 mosquitto 正在運行：
  ```bash
  sudo systemctl status mosquitto
  ```

### Q3: 想查看 Excel 檔案內容？
**A**: 使用 LibreOffice 開啟：
```bash
libreoffice sensor_data.xlsx
```

## 🎉 完成！

現在您有一個完整的 MQTT 監控儀表板，包含：
- ✅ 50 筆測試歷史數據
- ✅ 美觀的網頁介面
- ✅ 即時 MQTT 接收功能
- ✅ 自動數據儲存

享受使用吧！🚀

